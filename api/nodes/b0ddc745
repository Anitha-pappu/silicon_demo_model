{
  "code": "def convert_metrics_to_nested_mlflow_dict(\n    metrics: tp.Dict[str, float],\n    step: tp.Optional[int] = None,\n) -> _TKedroMLflowMetrics:\n    \"\"\"\n    Converts intuitive ``Dict[str, float]`` metrics produced by OAI APIs\n    into a nested `Dict` that `kedro-mlflow` custom Dataset can use.\n\n    From::\n\n        >>> {\n        ...     \"R2\": 0.9,\n        ...     \"MAE\": 42,\n        ... }\n\n    To::\n\n        >>> {\n        ...     \"R2\": {\n        ...         \"value\" : 0.9,\n        ...         \"step\" : None,\n        ...     },\n        ...     \"MAE\": {\n        ...         \"value\" : 42,\n        ...         \"step\" : None,\n        ...     },\n        ... }\n\n    The only reason this API exists is that none of ``kedro-mlflow`` custom datasets,\n    for some reason, can save the original ``Dict[str, float]`` format. However they\n    should, given that ``mlflow.log_metrics()`` works exactly with this  format.\n\n    This function should be used only in kedro workflow and its usage is as follows:\n        1. You have a node that produces ``Dict[str, float]`` metrics. All provided\n            OAI APIs for metrics, feature importances etc. do that.\n        2. If you want to log those metrics to ``MLflow`` using ``kedro-mlflow``,\n            you need to add another node after that that wraps current function.\n        3. Output of this node should be mentioned and typed in kedro catalog as\n            ``kedro_mlflow.io.metrics.MlflowMetricsDataSet``\n\n    Overall, this function would be useless in any other context than described above.\n\n    Args:\n        metrics: to log to mlflow via ``kedro_mlflow.io.metrics.MlflowMetricsDataSet``.\n        step: a single integer step at which to log the specified metrics.\n            If unspecified, each metric is logged at step zero. Default behavior is\n            suitable for all cases where metrics are produced once per run. Specifying\n            a ``step`` explicitly would make sense, for example, in case of logging\n            how neural network loss is reducing as new epochs pass throughout the run.\n            See here: https://snyk.io/advisor/python/mlflow/functions/mlflow.log_metric\n\n    Returns:\n        Same metrics but converted into a nested dictionary required by `kedro-mlflow`.\n    \"\"\"\n\n    return {\n        name: {\n            \"value\": number,\n            \"step\": step,\n        }\n        for name, number in metrics.items()\n    }\n",
  "filepath": "optimus_set_point_optimization_kedro_app-0.21.0\\src\\modeling\\kedro_utils\\mlflow_utils.py",
  "parameters": {},
  "run_command": "kedro run --to-nodes=baseline_model.convert_metrics_to_nested_mlflow_dict",
  "inputs": [
    "baseline_test_metrics"
  ],
  "outputs": [
    "baseline_test_metrics_for_mlflow"
  ]
}