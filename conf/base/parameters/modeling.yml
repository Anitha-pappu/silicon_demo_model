silicon_model:
  #  Params for train and test data splitting
  split:
  #  Splitting strategy: can be one of
  #  ["date", "frac", "periods", "last_window", "sequential_window"]
    split_method: date
    # Note that split_parameters would be different for each `split_method`.
    # E.g. `date` as `split_method` requires those below. Changing to `frac` method would require different
    # parameters related to train / test fractions. Refer to `SplitterBase` tutorial in `modeling` documentation
    # for comprehensive overview.
    split_parameters:
    #  Column name for datetime data
      datetime_column: timestamp
    #  Timestamp for train and test splitting
      # split_datetime: "2017-08-30 23:00:00"
      split_datetime: "2019-03-27 23:00:00"


  #  Params for hyperparameters tuning
  tune:
  #  `ModelTunerBase` inheritor class that
  #  performs model hyperparameters tuning
    class_name: modeling.SklearnPipelineTuner
  #  Parameters dict for `ModelTunerBase` tuning parameters
    tuner:
      class_name: sklearn.model_selection.GridSearchCV
      kwargs:
        n_jobs: -1
        refit: mae
        param_grid:
          estimator__alpha: [0.0001, 0.001, 0.01, 0.1, 1, 10]
          estimator__l1_ratio: [0.00001, 0.0001, 0.001, 0.01, 0.1, 1]
        scoring:
          mae: neg_mean_absolute_error
          rmse: neg_root_mean_squared_error
          r2: r2
    hyperparameters: null


  #  Params for model initialization and training
  train:
  #  Name of the model target column
    target_column: silicon
  #  List of model features
    model_features:
      # - iron_feed
      # - silica_feed
      # - starch_flow
      # - amina_flow
      # - ore_pulp_flow
      # - ore_pulp_ph
      # - ore_pulp_density
      # - total_air_flow
      # - total_column_level
      # - feed_diff_divide_silica
      - al2o3_slag
      - avg_uptake_press
      - c_2_hm
      - CAO_slag
      - coke_thickness_belly
      - ETA_CO
      - HBT
      - humidity
      # - lower_k
      - m_value
      - MGO_slag
      - total_k
      - PCI_KG_THM
      - pellet_percent
      - production_rate
      - sinter_percent
      - SIO2_slag
      - SLAG_VOL_KG_THM
      - dry_cokerate_pro
      # - silica_conc_lagged # uncomment to include lagged silica_conc after adding shift in feature factory sample functions
  #  Name of the factory that builds the
  #  `optimus_core.model_base.ModelBase` inheritor class
  #  that handles predictive modeling
    factory_class_name: modeling.SklearnPipelineFactory
  #  Initialization parameters for sklearn estimator
  #  to be wrapped with `SklearnPipeline`
    init:
      estimator:
        class_name: sklearn.linear_model.SGDRegressor
        kwargs:
          random_state: 123
          penalty: elasticnet
  # Initialization parameters for sklearn compatible
  # transformers to be included in `SklearnPipeline`
      transformers:
        - class_name: sklearn.preprocessing.StandardScaler
          kwargs: {}
          name: standard_scaler
          wrapper: preserve_columns

  # Params for cross-validation of model accuracy
  cross_validate:
    cv_strategy_config:
      class_name: sklearn.model_selection.TimeSeriesSplit
      kwargs:
        n_splits: 4
        
  model_performance_report:
    render_path: data/08_reporting/model_performance_report.html
    report_meta_data:
      title: Silicon Model Performance Report

baseline_model:
  split:
    split_method: last_window
    split_parameters:
      datetime_column: timestamp
      # split_datetime: "2019-03-20 23:00:00"
      freq: 14D

  tune:
    class_name: modeling.SklearnPipelineTuner
    tuner:
      class_name: sklearn.model_selection.GridSearchCV
      kwargs:
        n_jobs: -1
        refit: mae
        param_grid:
          estimator__alpha: [0.05, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6]
        scoring:
          mae: neg_mean_absolute_error
          rmse: neg_root_mean_squared_error
          r2: r2
    hyperparameters: null

  train:
    target_column: silicon
    model_features:
      # - iron_feed
      # - silica_feed
      # - feed_diff_divide_silica
      - al2o3_slag
      - avg_uptake_press
      - PCI_KG_THM
      - pellet_percent
      - production_rate
      - sinter_percent
      - SIO2_slag
      - SLAG_VOL_KG_THM
      - dry_cokerate_pro
      - c_2_hm
      - CAO_slag
      - coke_thickness_belly
      - ETA_CO
      - HBT
      - humidity
      - total_k
      - m_value
      - MGO_slag
      # - middle_k

    factory_class_name: modeling.SklearnPipelineFactory
    init:
      estimator:
        class_name: sklearn.linear_model.Ridge
        kwargs:
          random_state: 123
          max_iter: 1000
      transformers:
        - class_name: sklearn.preprocessing.StandardScaler
          kwargs: { }
          name: standard_scaler
          wrapper: preserve_columns

  cross_validate:
    cv_strategy_config:
      class_name: sklearn.model_selection.TimeSeriesSplit
      kwargs:
        n_splits: 5


# Params for model performance monitoring
model_monitoring:
  error_metric: rmse
  error_multiplier: 1.96
